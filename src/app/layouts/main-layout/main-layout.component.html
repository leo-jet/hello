<div class="flex h-screen bg-gray-50">
  <!-- Sidebar -->
  <app-sidebar [isOpen]="sidebarOpen()" (closeEvent)="closeSidebar()">
    <!-- Header de la sidebar -->
    <div slot="header">
      <!-- Logo et titre -->
      <div class="mb-4 flex items-center space-x-2">
        <div class="w-8 h-8 bg-blue-600 rounded flex items-center justify-center">
          <i class="fas fa-comments text-white" aria-hidden="true"></i>
        </div>
        <h2 class="text-lg font-semibold text-gray-900">ChatApp</h2>
      </div>

      <!-- Navigation principale -->
      <app-main-sidebar-navigation
        [currentChatMode]="currentChatMode()"
        [currentRoute]="currentRoute()"
        [chatModes]="chatModes"
        [chatModesExpanded]="chatModesExpanded()"
        (homeClick)="navigateToHome()"
        (docsClick)="navigateToDocs()"
        (newChatClick)="createNewChat()"
        (chatModeClick)="navigateToChatMode($event)"
        (toggleChatModes)="toggleChatModesMenu()"
      />
    </div>

    <!-- Contenu de la sidebar -->
    <div slot="content" class="px-4 py-2">
      <!-- Liste des conversations -->
      <div class="mb-2 flex items-center justify-between">
        <h3 class="text-xs font-semibold text-gray-500 uppercase">
          Conversations
        </h3>
        <button class="p-1 rounded hover:bg-gray-100 text-gray-600">
          <i class="fas fa-plus text-xs" aria-hidden="true"></i>
        </button>
      </div>

      <app-list>
        @for (conversation of conversations; track conversation.id) {
          <app-main-conversation-item
            [conversation]="conversation"
            (conversationClick)="navigateToChat($event.id)"
            (deleteClick)="handleDeleteConversation($event)"
          />
        }
      </app-list>
    </div>

    <!-- Footer de la sidebar -->
    <div slot="footer" class="p-4 border-t">
      <!-- Profil utilisateur -->
      <div class="flex items-center space-x-3 cursor-pointer hover:bg-gray-50 p-2 rounded transition-colors">
        <!-- Avatar -->
        <div class="flex-shrink-0">
          <div class="w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center">
            <span class="text-white font-medium text-sm">EU</span>
          </div>
        </div>

        <!-- Informations utilisateur -->
        <div class="flex-1 min-w-0">
          <p class="text-sm font-medium text-gray-900 truncate">
            Emman Utilisateur
          </p>
          <p class="text-xs text-gray-500 truncate">emmanu&#64;example.com</p>
        </div>

        <!-- Icône paramètres -->
        <div class="flex-shrink-0">
          <i class="fas fa-cog text-gray-400 hover:text-gray-600" aria-hidden="true"></i>
        </div>
      </div>
    </div>
  </app-sidebar>

  <!-- Zone principale avec header et contenu -->
  <div class="flex-1 flex flex-col overflow-hidden md:ml-80 transition-all">
    <!-- Header avec ng-content -->
    <app-header
      [title]="title"
      [showNotificationButton]="true"
      [notificationCount]="3"
      (toggleEvent)="toggleSidebar()"
    >
      <!-- Contenu header personnalisé -->
      <div slot="right">
        <ng-content select="[header]"></ng-content>
      </div>

      <!-- Actions additionnelles -->
      
    </app-header>

    <!-- Contenu principal -->
    <main class="flex-1 overflow-y-auto bg-gray-50">
      <div class="p-8">
        <ng-content></ng-content>
        <router-outlet></router-outlet>
      </div>
    </main>

    <!-- Footer optionnel -->
    <ng-content select="[footer]"></ng-content>
  </div>

  <!-- Overlay pour mobile -->
  <app-overlay [show]="sidebarOpen()" (clickEvent)="closeSidebar()">
  </app-overlay>
</div>
