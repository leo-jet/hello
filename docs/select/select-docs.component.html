<div class="w-full max-w-7xl mx-auto px-4 py-8">
  <!-- En-tête -->
  <div class="mb-8">
    <h1
      class="text-2xl font-bold text-gray-900 mb-6 pb-3 border-b-2 border-blue-500"
    >
      Select Component
    </h1>
    <p class="text-base text-gray-600 leading-relaxed">
      Composant
      <code
        class="bg-blue-50 text-blue-700 px-2 py-0.5 rounded font-mono text-sm"
        >app-select</code
      >
      — menu déroulant léger, support d'icônes, images, positionnement
      intelligent et options personnalisables.
    </p>
  </div>

  <!-- Navigation par onglets -->
  <div class="mb-8">
    <div class="flex items-center gap-2 bg-gray-100 p-1 rounded-lg w-fit">
      <button
        type="button"
        (click)="setActiveTab('use-cases')"
        [class]="
          activeTab() === 'use-cases'
            ? 'bg-white text-gray-900 shadow-sm px-4 py-2.5 rounded-md font-semibold text-sm transition-all duration-200'
            : 'text-gray-600 hover:text-gray-900 px-4 py-2.5 rounded-md font-medium text-sm transition-all duration-200 hover:bg-white/50'
        "
      >
        Use-cases
      </button>
      <button
        type="button"
        (click)="setActiveTab('api')"
        [class]="
          activeTab() === 'api'
            ? 'bg-white text-gray-900 shadow-sm px-4 py-2.5 rounded-md font-semibold text-sm transition-all duration-200'
            : 'text-gray-600 hover:text-gray-900 px-4 py-2.5 rounded-md font-medium text-sm transition-all duration-200 hover:bg-white/50'
        "
      >
        API rapide
      </button>
      <button
        type="button"
        (click)="setActiveTab('behavior')"
        [class]="
          activeTab() === 'behavior'
            ? 'bg-white text-gray-900 shadow-sm px-4 py-2.5 rounded-md font-semibold text-sm transition-all duration-200'
            : 'text-gray-600 hover:text-gray-900 px-4 py-2.5 rounded-md font-medium text-sm transition-all duration-200 hover:bg-white/50'
        "
      >
        Comportement
      </button>
    </div>
  </div>

  <!-- Tab Content: Use-cases -->
  @if (activeTab() === 'use-cases') {
  <div class="bg-white rounded-lg p-6 shadow-sm border border-gray-100">
    <ul class="space-y-3">
      <li class="flex items-start">
        <span
          class="flex-shrink-0 w-1.5 h-1.5 rounded-full bg-blue-600 mt-2 mr-3"
        ></span>
        <span class="text-gray-700 leading-relaxed"
          >Formulaires simples et listes de sélection.</span
        >
      </li>
      <li class="flex items-start">
        <span
          class="flex-shrink-0 w-1.5 h-1.5 rounded-full bg-blue-600 mt-2 mr-3"
        ></span>
        <span class="text-gray-700 leading-relaxed"
          >Sélecteurs avec icônes ou images (avatars) — l'icône/image
          sélectionnée s'affiche dans le bouton.</span
        >
      </li>
      <li class="flex items-start">
        <span
          class="flex-shrink-0 w-1.5 h-1.5 rounded-full bg-blue-600 mt-2 mr-3"
        ></span>
        <span class="text-gray-700 leading-relaxed"
          >Menus déroulants positionnés intelligemment (évite les débordements
          d'écran, s'adapte automatiquement).</span
        >
      </li>
      <li class="flex items-start">
        <span
          class="flex-shrink-0 w-1.5 h-1.5 rounded-full bg-blue-600 mt-2 mr-3"
        ></span>
        <span class="text-gray-700 leading-relaxed"
          >Retour d'objet complet ou seulement de la valeur (voir
          <code
            class="bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded font-mono text-xs"
            >returnObject</code
          >).</span
        >
      </li>
      <li class="flex items-start">
        <span
          class="flex-shrink-0 w-1.5 h-1.5 rounded-full bg-blue-600 mt-2 mr-3"
        ></span>
        <span class="text-gray-700 leading-relaxed"
          >Gestion automatique de plusieurs composants Select sur une même page
          (un seul menu ouvert à la fois).</span
        >
      </li>
    </ul>
  </div>
  }

  <!-- Tab Content: API rapide -->
  @if (activeTab() === 'api') {
  <div class="space-y-6">
    <!-- Inputs -->
    <div class="bg-white rounded-lg p-6 shadow-sm border border-gray-100">
      <h3
        class="text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200"
      >
        Inputs
      </h3>
      <div class="space-y-3">
        <div class="flex items-start">
          <code
            class="flex-shrink-0 bg-blue-50 text-blue-700 px-2 py-1 rounded font-mono text-xs mr-3"
            >options</code
          >
          <span class="text-sm text-gray-700"
            >Tableau d'options. Chaque option peut être un primitif
            (string/number) ou un objet.</span
          >
        </div>
        <div class="flex items-start">
          <code
            class="flex-shrink-0 bg-blue-50 text-blue-700 px-2 py-1 rounded font-mono text-xs mr-3"
            >valueField</code
          >
          <span class="text-sm text-gray-700"
            >Propriété à lire pour la valeur (par défaut
            <code class="bg-gray-100 text-gray-800 px-1 rounded text-xs"
              >"value"</code
            >).</span
          >
        </div>
        <div class="flex items-start">
          <code
            class="flex-shrink-0 bg-blue-50 text-blue-700 px-2 py-1 rounded font-mono text-xs mr-3"
            >labelField</code
          >
          <span class="text-sm text-gray-700"
            >Propriété à lire pour l'étiquette (par défaut
            <code class="bg-gray-100 text-gray-800 px-1 rounded text-xs"
              >"label"</code
            >).</span
          >
        </div>
        <div class="flex items-start">
          <code
            class="flex-shrink-0 bg-blue-50 text-blue-700 px-2 py-1 rounded font-mono text-xs mr-3"
            >iconField</code
          >
          <span class="text-sm text-gray-700"
            >Propriété contenant l'icône à afficher (par ex. emoji ou
            classe).</span
          >
        </div>
        <div class="flex items-start">
          <code
            class="flex-shrink-0 bg-blue-50 text-blue-700 px-2 py-1 rounded font-mono text-xs mr-3"
            >imageField</code
          >
          <span class="text-sm text-gray-700"
            >Propriété contenant le chemin d'image (avatar).</span
          >
        </div>
        <div class="flex items-start">
          <code
            class="flex-shrink-0 bg-blue-50 text-blue-700 px-2 py-1 rounded font-mono text-xs mr-3"
            >buttonClass</code
          >
          <span class="text-sm text-gray-700"
            >Classes CSS pour styliser le bouton.</span
          >
        </div>
        <div class="flex items-start">
          <code
            class="flex-shrink-0 bg-blue-50 text-blue-700 px-2 py-1 rounded font-mono text-xs mr-3"
            >menuClass</code
          >
          <span class="text-sm text-gray-700"
            >Classes CSS pour styliser le menu.</span
          >
        </div>
        <div class="flex items-start">
          <code
            class="flex-shrink-0 bg-blue-50 text-blue-700 px-2 py-1 rounded font-mono text-xs mr-3"
            >itemClass</code
          >
          <span class="text-sm text-gray-700"
            >Classes CSS pour styliser les items.</span
          >
        </div>
        <div class="flex items-start">
          <code
            class="flex-shrink-0 bg-blue-50 text-blue-700 px-2 py-1 rounded font-mono text-xs mr-3"
            >returnObject</code
          >
          <span class="text-sm text-gray-700"
            >Si vrai, l'événement
            <code class="bg-gray-100 text-gray-800 px-1 rounded text-xs"
              >selection</code
            >
            émet l'objet complet ; sinon la valeur.</span
          >
        </div>
        <div class="flex items-start">
          <code
            class="flex-shrink-0 bg-blue-50 text-blue-700 px-2 py-1 rounded font-mono text-xs mr-3"
            >placeholder</code
          >
          <span class="text-sm text-gray-700"
            >Texte affiché quand rien n'est sélectionné (par défaut
            <code class="bg-gray-100 text-gray-800 px-1 rounded text-xs"
              >"Select"</code
            >).</span
          >
        </div>
        <div class="flex items-start">
          <code
            class="flex-shrink-0 bg-blue-50 text-blue-700 px-2 py-1 rounded font-mono text-xs mr-3"
            >openUpward</code
          >
          <span class="text-sm text-gray-700"
            >Forcer l'ouverture vers le haut. Note : le composant détecte
            automatiquement l'espace disponible.</span
          >
        </div>
        <div class="flex items-start">
          <code
            class="flex-shrink-0 bg-blue-50 text-blue-700 px-2 py-1 rounded font-mono text-xs mr-3"
            >defaultValue</code
          >
          <span class="text-sm text-gray-700"
            >Valeur initiale à sélectionner au chargement du composant.</span
          >
        </div>
        <div class="flex items-start">
          <code
            class="flex-shrink-0 bg-blue-50 text-blue-700 px-2 py-1 rounded font-mono text-xs mr-3"
            >value</code
          >
          <span class="text-sm text-gray-700"
            >Setter pour injecter la valeur sélectionnée depuis l'extérieur de
            manière dynamique.</span
          >
        </div>
      </div>
    </div>

    <!-- Outputs -->
    <div class="bg-white rounded-lg p-6 shadow-sm border border-gray-100">
      <h3
        class="text-lg font-semibold text-gray-900 mb-4 pb-2 border-b border-gray-200"
      >
        Outputs
      </h3>
      <div class="flex items-start">
        <code
          class="flex-shrink-0 bg-blue-50 text-blue-700 px-2 py-1 rounded font-mono text-xs mr-3"
          >selection</code
        >
        <span class="text-sm text-gray-700"
          >Émis quand une option est choisie (valeur ou objet selon
          <code class="bg-gray-100 text-gray-800 px-1 rounded text-xs"
            >returnObject</code
          >).</span
        >
      </div>
    </div>
  </div>
  }

  <!-- Tab Content: Comportement -->
  @if (activeTab() === 'behavior') {
  <div class="bg-white rounded-lg p-6 shadow-sm border border-gray-100">
    <div class="space-y-4">
      <div class="pb-4 border-b border-gray-100">
        <h4 class="font-semibold text-gray-900 mb-2">Affichage visuel</h4>
        <p class="text-sm text-gray-700 leading-relaxed">
          Le bouton affiche automatiquement l'icône ou l'image de l'option
          sélectionnée (priorité : image → icône → label uniquement). Utilise
          l'icône FontAwesome
          <code
            class="bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded font-mono text-xs"
            >fa-chevron-down</code
          >
          comme indicateur de menu déroulant.
        </p>
      </div>

      <div class="pb-4 border-b border-gray-100">
        <h4 class="font-semibold text-gray-900 mb-2">
          Positionnement intelligent
        </h4>
        <p class="text-sm text-gray-700 leading-relaxed">
          Le menu est positionné en
          <code
            class="bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded font-mono text-xs"
            >position: fixed</code
          >
          et détecte automatiquement l'espace disponible. Si le menu déborde en
          bas de l'écran, il s'ouvre automatiquement vers le haut.
        </p>
      </div>

      <div class="pb-4 border-b border-gray-100">
        <h4 class="font-semibold text-gray-900 mb-2">
          Gestion multi-instances
        </h4>
        <p class="text-sm text-gray-700 leading-relaxed">
          Chaque composant Select a un identifiant unique (<code
            class="bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded font-mono text-xs"
            >instanceId</code
          >). Quand un menu s'ouvre, tous les autres menus ouverts se ferment
          automatiquement.
        </p>
      </div>

      <div class="pb-4 border-b border-gray-100">
        <h4 class="font-semibold text-gray-900 mb-2">Accessibilité</h4>
        <p class="text-sm text-gray-700 leading-relaxed">
          Attributs ARIA (<code
            class="bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded font-mono text-xs"
            >aria-controls</code
          >,
          <code
            class="bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded font-mono text-xs"
            >aria-labelledby</code
          >,
          <code
            class="bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded font-mono text-xs"
            >aria-expanded</code
          >) pour une meilleure accessibilité.
        </p>
      </div>

      <div class="pb-4 border-b border-gray-100">
        <h4 class="font-semibold text-gray-900 mb-2">
          Gestion des clics externes
        </h4>
        <p class="text-sm text-gray-700 leading-relaxed">
          Un listener global via
          <code
            class="bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded font-mono text-xs"
            >&#64;HostListener('document:click')</code
          >
          ferme le menu lorsque l'utilisateur clique en dehors.
        </p>
      </div>

      <div class="pb-4 border-b border-gray-100">
        <h4 class="font-semibold text-gray-900 mb-2">Options de données</h4>
        <p class="text-sm text-gray-700 leading-relaxed">
          Le composant accepte des options en tant que primitives (ex:
          <code class="bg-gray-100 text-gray-800 px-1.5 py-0.5 rounded text-xs"
            >["a","b"]</code
          >) ou objets (<code
            class="bg-gray-100 text-gray-800 px-1.5 py-0.5 rounded text-xs"
            >&#123; value, label, icon, img_path &#125;</code
          >).
        </p>
      </div>

      <div class="pb-4 border-b border-gray-100">
        <h4 class="font-semibold text-gray-900 mb-2">Personnalisation</h4>
        <p class="text-sm text-gray-700 leading-relaxed">
          Pour les longues listes, tu peux fournir des classes via
          <code
            class="bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded font-mono text-xs"
            >menuClass</code
          >
          et
          <code
            class="bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded font-mono text-xs"
            >itemClass</code
          >
          pour ajuster le style et la taille.
        </p>
      </div>

      <div>
        <h4 class="font-semibold text-gray-900 mb-2">
          Détection de changement optimisée
        </h4>
        <p class="text-sm text-gray-700 leading-relaxed">
          Utilise
          <code
            class="bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded font-mono text-xs"
            >ChangeDetectorRef.markForCheck()</code
          >
          pour assurer la réactivité même dans des environnements complexes.
        </p>
      </div>
    </div>
  </div>
  }

  <!-- Examples Section -->
  <div class="mt-8">
    <h2
      class="text-2xl font-bold text-gray-900 mb-6 pb-3 border-b-2 border-blue-500"
    >
      Exemples d'utilisation
    </h2>

    <div class="space-y-6">
      <!-- Example 1 -->
      <div class="bg-white rounded-lg p-6 shadow-sm border border-gray-100">
        <h3 class="text-lg font-semibold text-gray-900 mb-3 flex items-center">
          <span
            class="bg-blue-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-sm mr-2"
            >1</span
          >
          Basic — valeurs primitives
        </h3>
        <div class="space-y-3">
          <p class="text-sm text-gray-600">Live demo :</p>
          <div class="inline-block">
            <app-select
              [options]="colors"
              placeholder="Choisir une couleur"
              (selection)="onSelectColor($event)"
              buttonClass="bg-white border"
            ></app-select>
          </div>
          <div class="text-sm text-gray-700 bg-gray-50 rounded p-3">
            <span class="font-medium">Résultat :</span>
            {{ selectedColor() || "—" }}
          </div>
        </div>
      </div>

      <!-- Example 2 -->
      <div class="bg-white rounded-lg p-6 shadow-sm border border-gray-100">
        <h3 class="text-lg font-semibold text-gray-900 mb-3 flex items-center">
          <span
            class="bg-blue-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-sm mr-2"
            >2</span
          >
          Options objets avec icône
        </h3>
        <div class="space-y-3">
          <p class="text-sm text-gray-600">
            L'icône de l'option sélectionnée s'affiche dans le bouton :
          </p>
          <app-select
            [options]="iconOptions"
            (selection)="onSelectIcon($event)"
            buttonClass="bg-white border"
          ></app-select>
          <div class="text-sm text-gray-700 bg-gray-50 rounded p-3">
            <span class="font-medium">Résultat :</span>
            {{
              selectedIconOption()
                ? selectedIconOption().label || selectedIconOption()
                : "—"
            }}
          </div>
        </div>
      </div>

      <!-- Example 3 -->
      <div class="bg-white rounded-lg p-6 shadow-sm border border-gray-100">
        <h3 class="text-lg font-semibold text-gray-900 mb-3 flex items-center">
          <span
            class="bg-blue-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-sm mr-2"
            >3</span
          >
          Retour d'objet complet
        </h3>
        <div class="space-y-3">
          <p class="text-sm text-gray-600">
            Avec
            <code
              class="bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded font-mono text-xs"
              >returnObject="true"</code
            >
            :
          </p>
          <app-select
            [options]="opts"
            [returnObject]="true"
            (selection)="onSelectObject($event)"
            buttonClass="bg-white border"
            labelField="name"
            valueField="id"
          ></app-select>
          <div class="text-sm text-gray-700 bg-gray-50 rounded p-3">
            <span class="font-medium">Résultat (objet complet) :</span>
            <pre
              class="mt-2 text-xs bg-white p-2 rounded border border-gray-200 overflow-x-auto"
              >{{ selectedObject() ? (selectedObject() | json) : "—" }}</pre
            >
          </div>
        </div>
      </div>

      <!-- Example 4 -->
      <div class="bg-white rounded-lg p-6 shadow-sm border border-gray-100">
        <h3 class="text-lg font-semibold text-gray-900 mb-3 flex items-center">
          <span
            class="bg-blue-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-sm mr-2"
            >4</span
          >
          Options avec image (avatar)
        </h3>
        <div class="space-y-3">
          <p class="text-sm text-gray-600">
            L'avatar de l'option sélectionnée s'affiche dans le bouton :
          </p>
          <app-select
            [options]="users"
            imageField="avatar"
            labelField="name"
            valueField="id"
            (selection)="onSelectUser($event)"
            buttonClass="bg-white border"
          ></app-select>
          <div class="text-sm text-gray-700 bg-gray-50 rounded p-3">
            <span class="font-medium">Résultat :</span>
            {{ selectedUser() ? selectedUser().name : "—" }}
          </div>
        </div>
      </div>

      <!-- Example 5 -->
      <div class="bg-white rounded-lg p-6 shadow-sm border border-gray-100">
        <h3 class="text-lg font-semibold text-gray-900 mb-3 flex items-center">
          <span
            class="bg-blue-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-sm mr-2"
            >5</span
          >
          Avec valeur par défaut
        </h3>
        <div class="space-y-3">
          <p class="text-sm text-gray-600">
            Avec
            <code
              class="bg-blue-50 text-blue-700 px-1.5 py-0.5 rounded font-mono text-xs"
              >defaultValue="blue"</code
            >
            :
          </p>
          <app-select
            [options]="colors"
            [defaultValue]="'blue'"
            placeholder="Choisir une couleur"
            (selection)="onSelectDefaultColor($event)"
            buttonClass="bg-white border"
          ></app-select>
          <div class="text-sm text-gray-700 bg-gray-50 rounded p-3">
            <span class="font-medium">Résultat :</span>
            {{ selectedDefaultColor() || "—" }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Notes Section -->
  <div class="mt-8 bg-blue-50 rounded-lg p-6 border border-blue-100">
    <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
      <svg
        class="w-5 h-5 text-blue-500 mr-2"
        fill="currentColor"
        viewBox="0 0 20 20"
      >
        <path
          fill-rule="evenodd"
          d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
          clip-rule="evenodd"
        />
      </svg>
      Notes importantes
    </h2>
    <div class="space-y-3">
      <div class="flex">
        <div
          class="flex-shrink-0 w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 mr-3"
        ></div>
        <p class="text-sm text-gray-700 leading-relaxed">
          Le composant n'expose pas d'API pour le keyboard navigation avancé
          (page up/down) mais supporte l'échappement via la touche
          <code
            class="bg-white text-gray-800 px-1.5 py-0.5 rounded font-mono text-xs border border-gray-200"
            >Escape</code
          >.
        </p>
      </div>

      <div class="flex">
        <div
          class="flex-shrink-0 w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 mr-3"
        ></div>
        <p class="text-sm text-gray-700 leading-relaxed">
          Si tu veux une sélection contrôlée depuis l'extérieur, passe la valeur
          via l'Input setter
          <code
            class="bg-white text-gray-800 px-1.5 py-0.5 rounded font-mono text-xs border border-gray-200"
            >value</code
          >.
        </p>
      </div>

      <div class="flex">
        <div
          class="flex-shrink-0 w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 mr-3"
        ></div>
        <p class="text-sm text-gray-700 leading-relaxed">
          Pour une valeur initiale, utilise
          <code
            class="bg-white text-gray-800 px-1.5 py-0.5 rounded font-mono text-xs border border-gray-200"
            >defaultValue</code
          >
          qui sera appliquée au chargement du composant.
        </p>
      </div>

      <div class="flex">
        <div
          class="flex-shrink-0 w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 mr-3"
        ></div>
        <p class="text-sm text-gray-700 leading-relaxed">
          Chaque instance a un
          <code
            class="bg-white text-gray-800 px-1.5 py-0.5 rounded font-mono text-xs border border-gray-200"
            >instanceId</code
          >
          unique pour faciliter le débogage et l'identification dans le DOM.
        </p>
      </div>

      <div class="flex">
        <div
          class="flex-shrink-0 w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 mr-3"
        ></div>
        <p class="text-sm text-gray-700 leading-relaxed">
          Le bouton affiche automatiquement l'icône ou l'image de l'option
          sélectionnée avec priorité : image → icône → label seul.
        </p>
      </div>
    </div>
  </div>
</div>
